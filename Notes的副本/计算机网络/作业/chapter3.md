# 第三次作业

> 王磊 2020211538

#### 1.

***一个上层分组被切分成 10 帧，每帧有 80%几率无损到达，如果数据链路层协议没有提供错误控制，该报文平均需要发送多少次才能完整到达接收方？***

一次成功的概率为 $P=0.8^{10}=0.107$，第 i 次成功的概率为 $P_i=(1-P)^{i-1}p$，故期望为 $E=\frac{1}{p}=9.3$ 次。

#### 2.

A B ESC ESC C ESC ESC ESC FLAG ESC FLAG D。

#### 3. 

***使用位填充成帧方法，请问，因为丢失一位、插入一位、或者更改一位引起的错误能否校验和检测出来？不能的话为什么，能的话，校验和长度起了什么作用？***

可能被检测出来，检验和越长，传输错误被发现的概率越高

#### 6.

***为了提供比单个奇偶校验位所能提供的更高的可靠性，错误检测编码方案使用一个奇偶校验位来检查所有奇数位，并使用第二个奇偶校验位检查所有偶数位。此编码的汉明距离是多少？***

2。

#### 7.

***假设使用偶校验海明码对一个 8 位字节进行编码，该字节编码前为 10101111，请问编码之后的二进制值是什么？***

101001001111。

#### 9.

***一种检查错误的方式是按 n 行、每行 j位来传输数据，在每行和没烈烈加上奇偶位，其中右下角是一个检测它所在行和所在列的奇偶位，这种方案能检测出所有单错误吗，2 位错误呢，3 位呢？证明不能检测出部分 4 位错误。***

能检测单比特错误、2 比特错误。3 比特错误如果在同行或同列能检测出，如果一行中有两个错误，则至少其中一列会校验出错误。如果 4 比特错误出错的地方刚刚好在一个矩形的四个顶点，无法检测出错误。

#### 11.

***假设数据以大小为 1000 位的块传输。错误检测和重传机制（每个块 1 个奇偶校验位）比使用汉明代码更好的最大错误率是多少？假设位错误彼此独立，并且在重新传输期间不会发生位错误。***

$1000+r+1\leqslant2^r,r_{min}=10$，海明码对每个块需要 10 个检验位，总比特数为 1010。假设每个比特出错的概率为 x，每个块可能发生 1000x 的错误，每次发生错误 就要重传1001 比特，总传输比特数为$1001+1000x\times 1001$比特，假设$1001+1000x\times 1001<1010$，解得$x<8.99\times 10^{-6}$。

#### 14.

$M(x)=x^7+x^5+1$表示为二进制：10100001，r=3，$R(x)=111$。

#### 15.

***位流 10011101 使用教材中描述的标准 CRC 方法来进行校验。生成多项式是 $x^3+1$。写出实际传输的位串。假定在传输中第三位被反转，证明在接收方能检测出差错。举例说明接收方不能检测出位差错的情形。***

r=3，$M(x)$左移三位得到 10011101000，实际传输的比特串是 10011101100，第三位反转，收到的是 10111101100，检错时10111101100%1001= 100 $\neq0$，能检测出错误。当第 3 位和第 9 位同时反转，无法检测出错误。

#### 16.

*** 数据链路协议几乎总是将CRC放在尾部，而不是头部，为什么？***

CRC 在发送期间计算，放在头部需要处理两遍，尾部仅需一遍。

#### 17.

***在  ARQ 协议中，概述了一种情况：由于 ACK 帧丢失，对每一帧接收方都收到两次。如果数据帧和 ACK 都不丢失，接收方是否有可能收到重复的帧？***

有可能，若到达后接收方推迟 ACK 的发送，会导致发送方重新发送数据帧。

#### 18.

***某信道的数据率是 4 kbps，传播时延是 20 毫秒，帧长为多少时，停等协议的效率能至少能达到 50%？***

$T_f=\frac{4kbps}{L},T_d=200ms$，$C_r=\frac{T_f}{T_f+2T_d}\geqslant50\%$，解得$L\geqslant160bit$。

#### 20.

***一条 3000 公里长的 T1 中继线路使用协议 5 来传输 64 字节长的数据帧。如果传播速度为 6 微秒/公里，需要多少位序列号？***

设序号为 n 位，$W_s=2^n-1$，$C_r=\frac{W_sT_f}{T_f+2T_d}=100\%$，已知$T_d=3000\times6=18ms$，$T_f=64\times8/1.536Mbps=0.3ms$，解得$W_s\geqslant121$，故需要 7 位序号。

#### 27.

***在带宽为 1Mbps 的无差错链路上使用协议 6 进行通信，设最大帧长为 1000 位，网络层每秒产生一个新的数据包，重传超时间隔为 10ms。如果不使用 ACK 定时器，将产生不必要的重传。求一帧的平均重传次数***

传输时间：$\frac{1000b}{1Mbps}=1ms$加上重传超时间隔远小于 1 秒，必然会超时，超时后会重发帧，接收端回 NAK，发送端发新帧，平均每帧传送 2 次。

#### 1-22.

***当一个文件在两台计算机之间传输时，两种确认策略是可能的。在第一种方法中，文件被分割成数据包，由接收方单独确认，但文件传输作为一个整体不被确认。在第二种情况下，数据包不会被单独确认，但整个文件在到达时会被确认。讨论这两种方法。***

如果网络的丢包率高的话，单独确认每个数据包更好，这样每个丢掉的数据包都能重发；如果网络很可靠，在整个文件到达时确认能节省资源，但是当出现一个数据包丢失时需要重发整个文件。

#### 1-15.

***在某些网络中，数据链路层通过请求重新传输损坏的帧来处理传输错误。如果帧损坏的概率为 p，则发送帧所需的平均传输次数是多少？假设确认永远不会丢失。***

方法同第 1 题，·平均传输次数为$\frac{1}{1-p}$。

#### 30.

***在 64kbps 的无差错卫星信道上单方向发送多个长度为 512 字节的数据帧，反向会送较短的 ACK 帧。地面-卫星的传播时延是 270 毫秒。当发送窗口分别为 1、7、15、127 时，最大吞吐量各是多少？***

发送时延 64ms，信道利用率 100%时$W_s\times T_f\geqslant2T_d+T_f$，即$W_s>9.4375$,吞吐量达到最大值 64kbps，带入窗口量为 1,7,15,127，得到的吞吐量分别为 6.78kbps，47.5kbps，64kbps，64kbps。

#### 31.

***在一条 100 公里长的电缆上采用 T1 速率来发送数据，电缆的传播时延是真空中光速的 2/3。请问多少位数据可以充满电缆？***

传播时延为$5\times10^{-4}s$，带宽为1.544Mbps，带宽时延积是 772bit。

#### 32.

***写出至少一个原因为什么 PPP 使用字节填充而不用位填充？***

因为调制解调器处理数据的单位是字符而不是位。

#### 33.

***在 PPP 帧中承载 IP 数据包的最小开销是多少？只计算 PPP 本身的开销，不考虑 IP 包头。最大开销是多少？***

最小开销是每帧 5 字节，最大开销是 10 字节。

#### 补充题 1.

r=3，数据左移三位得 10010110000，用这个%1001=111。

#### 补充题 2.

$W_S+W_R\leqslant2^n$，则发送窗口最大值位为 3。

#### 补充题 3.

$\alpha=\frac{250}{1000/50}=12.5$，设发送窗口为 W，信道利用率为$W/(2+2\alpha)=50\%$，求出 W=14，根据$W\leqslant2^{n-1}$，求得 n=5。

#### 补充题 4.

需要重新发送未确认的 6 和 7 号帧，帧数为 2。

#### 补充题 5.

（1）$\alpha=\frac{270}{128\times\frac{16}{8}}=4.2$，$\frac{1}{2+2\alpha}=9.6\%$

（2）$\frac{7}{2+2\alpha}=67.3\%$

（3）$15>2+2\alpha$，利用率为 100%

（4）4 位

