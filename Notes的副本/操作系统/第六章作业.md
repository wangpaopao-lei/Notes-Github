老和尚小和尚问题

### 分析问题

1. 水缸：生产者-消费者问题，同步问题
   1. 水缸非空才能取水
   2. 水缸非满才能倒水
   3. 水缸需要被互斥访问
2. 水井：取水，互斥访问
3. 水桶：临界资源，互斥访问

### 设置信号量

1. 水缸empty，表示空闲水缸数量，初始值为 10
2. 水缸 full，表示非空水缸数量，初始值为 0
3. 水缸 mutex，表示水缸需要互斥访问，初始值为 1
4. 水桶 tong，临界资源信号量用于互斥访问，初始值为 3
5. 水井 jing，需要互斥访问，初始值为 1

### 具体算法描述

```pseudocode
semaphore empty=10;
semaphore full = 0;
semaphore mutex = 1;
semaphore tong = 3;
semaphore jing = 1;

void xiaoheshang(){
  P(tong);
  P(jing);
  qushui;
  V(jing);
  P(mutex);
 	P(empty);
  daoshui;
  V(mutex);
  V(full);
  V(tong);
}
```

小和尚：

1. 检查水缸是否为空
2. 检查是否有空闲水桶
3. 若有空闲，取桶
4. 检查水井是否空闲
5. 若空闲，取水
6. 检查水缸是否空闲
7. 若空闲，倒水
8. 让出水缸使用权
9. 让出水桶使用权
10. 水缸内加上一桶水

老和尚：

1. 检查水缸是否有水
2. 检查是否有空闲水桶
3. 若有空闲，取桶
4. 检查水缸是否空闲
5. 若空闲，取水
6. 让出水缸使用权
7. 喝水
8. 归还水桶
9. 水缸内减少一桶水



多类型读者-写者问题

### 问题分析

1. 读者 A 可以同时访问，但与读者 B 和 C 互斥访问
2. 读者 B 可以同时访问，但与读者 A 和 C 互斥访问
3. 读者 C 只能互斥访问

### 信号量设置

1. 读者数 count，表示当前正在访问的读者数，初始值为 0
2. A 类读者 rA，表示 A 类读者的访问权限，初始值为 1
3. B 类读者人B，表示 B 类读者的访问权限，初始值为 1
4. 互斥变量 mutex，实现对 count 的互斥访问，初始值为 1

### 算法具体描述

```pseudocode
int count=0;
semaphore rA=1;
semaphore rB=1;
semaphore mutex=1;

writerC(){
	while(1){
		P(rA);
		P(rB);
		write;
		V(rA);
		V(rB);
	}
}

readerA(){
	while(1){
		P(mutex);
		if(count==0)
			P(rA);
		else
			
		count++;
		V(mutex);
		read;
		
	}
}

readerB(){
	while(1){
		P(mutex);
		if(count==0)
			P(rB);
		else 
	}
	
}
```





牙科门诊

### 问题分析

1. 