# 规划模型

国 A，美 ABD

## 线性规划模型

**问题的线性和条件的线性**

#### Python求一次方程组的解

- 数值解

$X=A^{-1}b$

- 符号解

![image-20230103221217304](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230103221217304.png)



1. 决策变量
2. 目标函数
3. 约束条件



#### 规范形式

![image-20230103222224372](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230103222224372.png)

1. 目标函数（如果求最大值要加负号）
2. 不等式约束
3. 等式约束
4. 自变量约束





对决策变量进行扩充（通过引入松弛变量），去掉第一个不等式，得到

**一般形式**

![image-20230103222343520](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230103222343520.png)



#### 理解

1. 问题是线性的极大值
2. 约束条件是小于等于，变换为等于是利用线性方程组的特性
3. 变换需要应用松弛变量（==不参与决策==）
4. 核心在于决策变量

 #### python 求解

将问题转换为规范形式

使用 scipy.optimize 库的 linprog 方法求解

```python
from scipy import optimize 
import numpy as np
 
c = np.array([2,3,-5])
A = np.array([[-2,5,-1],[1,3,1]]) 
b = np.array([-10,12])
Aeq =np.array([[1,1,1]]) 
beq = np.array([7])
xl = (0,None) 
x2 = (0,None) 
x3 = (0,None)
res=optimize.linprog(-c,A,b,Aeq,beq,bounds=(xl,x2,x3)) 
print(res)
```



## 非线性规划

拉格朗日乘子法：将 n 个变量和 k 个约束条件的最优化问题转换为 n+k 个变量的方程组极值问题

![image-20230103232536641](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230103232536641.png)

### 扩展学习

启发式优化算法包

sko（scikit-opt）

[官方中文文档链接](https://scikit-opt.github.io/scikit-opt/#/zh/README)

1. 差分进化算法 DE
2. 遗传算法 GA
3. 粒子群算法 PSO
4. 模拟退火算法 SA
5. 蚁群算法 ACA
6. 免疫优化算法 IA
7. 人工鱼群算法 AFSA

==使用==

1. 定义问题

```python
'''
min f(x1, x2, x3) = x1^2 + x2^2 + x3^2
s.t.
    x1*x2 >= 1
    x1*x2 <= 5
    x2 + x3 = 1
    0 <= x1, x2, x3 <= 5
'''


def obj_func(p):
    x1, x2, x3 = p
    return x1 ** 2 + x2 ** 2 + x3 ** 2


constraint_eq = [
    lambda x: 1 - x[1] - x[2]
]

constraint_ueq = [
    lambda x: 1 - x[0] * x[1],
    lambda x: x[0] * x[1] - 5
]
```

2. 运行算法

```python
from sko.DE import DE

de = DE(func=obj_func, n_dim=3, size_pop=50, max_iter=800, lb=[0, 0, 0], ub=[5, 5, 5],
        constraint_eq=constraint_eq, constraint_ueq=constraint_ueq)

best_x, best_y = de.run()
print('best_x:', best_x, '\n', 'best_y:', best_y)
```



 ### 案例二

![image-20230104000807467](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230104000807467.png)

这里这个误差就是松弛变量

把规范性转换为一般型

![image-20230104001208287](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230104001208287.png)

将三个目标结合起来

## 整数规划

![image-20230104001440100](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230104001440100.png)

### 01 规划

#### 指派问题

决策变量$x_{ij}=0/1$决定是否指派第 i 人完成第 j 项任务

**数学模型**

![image-20230104001904655](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230104001904655.png)

**分支定界法**

![image-20230104002022323](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230104002022323.png)

**匈牙利算法**

好像在离散里学过



## 动态规划



![image-20230104004301881](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230104004301881.png)