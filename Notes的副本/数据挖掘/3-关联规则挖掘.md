频繁模式：

- 购物篮分析
- 事件发生的前后序列模式



挖掘频繁项集

1. 满足最小支持计数
2. 由频繁项集产生强关联规则（最小支持度、置信度）



项集是频繁的则它的子集也是频繁的

优化：

- 闭频繁项集
- 极大频繁项集



Apriori：逐层搜索的迭代方法，k 项集用于探索 k+1 项集

限制候选产生、发现频繁项集

- 扫描数据，累计每个项的计数，收集满足最小支持度的项，找出频繁 1 项集的集合，记为 L1
- 找出 L2……

**先验性质：频繁项集的非空子集一定是频繁的**

通过 Lk-1 找到 Lk：

1. ==连接步==：Lk-1 自身连接产生候选 k 项集的集合 Ck
2. ==剪枝步==：Ck 是 Lk 的超集
   - 扫描数据，确定 Ck 中每个候选的计数，从而确定 Lk
   - Ck 可能很大，根据先验性质，如果某个候选集的 k-1 子集不是频繁的，即可判定其不是频繁的

![shadow-image-20230408140635892](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230408140635892.png)

![shadow-image-20230408172407194](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230408172407194.png)



### 由频繁项集产生关联规则

对频繁项集的每个非空子集，判断其置信度是否不小于阈值，然后输出

![image-20230408183946181](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230408183946181.png)

![image-20230408183956372](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230408183956372.png)

### 提高 Apriori 算法的效率

算法变形

1. 基于散列的技术
2. 划分：为候选集划分数据（两次扫描）
   - 把 D 中的事务划分为 n 个非重叠区域，对每个分区找出局部频繁项集
   - 评估每个候选的实际支持度，确定全局频繁项集
3. 抽样：对给定数据的一个子集上挖掘
   - 牺牲精度换取性能
4. 动态项集计数：在扫描的不同点添加候选项集
   - 将数据库划分为用开始标记标记的块，可以在任何开始点添加新的候选集
   - （Apriori 算法仅在每次完整扫描数据库后确定新的候选）
   - 用迄今为止的计数作为实际计数的下界
5. 事务压缩：压缩进一步迭代扫描的事务数，不包含任何频繁 k 项集的事务不可能包含任何频繁 k+1 项集



### 挖掘频繁项集的模式增长算法

FPGrowth 算法

1. 生成 header table
1. 遍历数据，提取出只包含频繁项的事务
1. 构建 FP 树
1. 从下往上，得到条件模式基
1. 统计条件模式基中的元素的计数，去除小于支持度阈值的元素，得到新的条件模式基
1. 逐个分析 FP 子树，对子树里的元素全排

![image-20230408184045023](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230408184045023.png)

生成 FP树

1. 扫描数据库，统计每个项的计数，保留满足最小支持度的项，生成头指针表
2. 遍历数据集，对每一条事务：删去不再头表里的元素，其余元素按频率降序排列，得到频繁项
3. 对每一个事务，构建 FP 树

![image-20230408184022821](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230408184022821.png)

构建条件模式库

1. 对 head table，从下往上看
2. 分别找每个元素的**条件模式基*（pattern base）***

![image-20230408184032754](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230408184032754.png)

挖掘子模式

1. 遍历条件模式基，对每一个元素，统计子模式中元素的计数
2. 删除不满足最小支持度的元素，得到新的子模式，构建出 fp 子树
3. 找出子树的所有路径
4. 对每条路径，取所有组合，最后合取



### 垂直数据格式挖掘

item - TID_set 格式

TID_set：包含 item 的事务标识符集合

求事务的交集

![shadow-image-20230408165446168](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230408165446168.png)

### 挖掘闭模式和极大模式



## 模式评估方法

### 强关联规则

support-confidence 不能过滤负相关

### 关联分析到相关分析

相关性度量：lift

- 小于 1 负相关
- 大于 1 正相关

![shadow-image-20230408171904435](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230408171904435.png)





![image-20230609024955179](https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20230609024955179.png)
