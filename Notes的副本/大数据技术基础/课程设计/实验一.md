## 实验描述

----

搭建多层 Flume ⽹络进⾏数据收集任务

主要步骤：

1. 配置 Flume Agent
2. 启动 Flume Agent
3. 写入 a1_input.txt
4. 使用 avro client 向 a1 发送信息
5. 启动 netcat 向 a2 发送信息
6. 查看数据收集结果



## 实验步骤

---

1. 配置 agent1

在 ${FLUME_HOME}/conf ⽬录下编写配置⽂件 a1.conf，内容如下：

<img src="https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20221031220157363.png" alt="image-20221031220157363" style="zoom:25%;" />

2. 配置 agent2

在 ${FLUME_HOME}/conf ⽬录下编写配置⽂件 a2.conf，内容如下：

<img src="https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20221031220244654.png" alt="image-20221031220244654" style="zoom:25%;" />

3. 配置 agent3

在 ${FLUME_HOME}/conf ⽬录下编写配置⽂件 a3.conf，内容如下：

<img src="https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20221031220330390.png" alt="image-20221031220330390" style="zoom:25%;" />

4. 开始数据收集

在新的终端 ${FLUME_HOME} ⽬录下启动3 个 Flume Agent

- agen1
  - <img src="https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20221031220628587.png" alt="image-20221031220628587" style="zoom:25%;" />
- agent2
  - <img src="https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20221031221938545.png" alt="image-20221031221938545" style="zoom:25%;" />
- agent1
  - <img src="https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20221031222028178.png" alt="image-20221031222028178" style="zoom:25%;" />

4. 写入 a1_input.txt

<img src="https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20221031220949286.png" alt="image-20221031220949286" style="zoom:25%;" />

5. 使用 avro client 向 a1 发送信息
   - <img src="https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20221031221223678.png" alt="image-20221031221223678" style="zoom:25%;" />
   - 在 a1 中查看消息
   - <img src="https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20221031222210966.png" alt="image-20221031222210966" style="zoom:25%;" />

6. 使用 netcat 向 a2 发送消息

   - <img src="https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20221031222422583.png" alt="image-20221031222422583" style="zoom:25%;" />

   - 在 a2  中查看消息
   - <img src="https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20221031222508576.png" alt="image-20221031222508576" style="zoom:25%;" />
   - 在日志中查看手机结果
   - <img src="https://wangleidetuchuang.oss-cn-beijing.aliyuncs.com/img/image-20221031222615202.png" alt="image-20221031222615202" style="zoom:25%;" />




