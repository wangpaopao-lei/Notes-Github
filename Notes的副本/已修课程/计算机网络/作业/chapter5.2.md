### 20

链路能容纳帧的长度：A 到 R1 为 1010bytes，R1到 R2 为 504bytes，R2 到 B 为 500bytes。IP 包长度为 940bytes。

A 到 R1 ：940，ID=x，DF=0，MF=0，Offset=0

R1 到 R2：分片 500，ID=x，DF=0，MF=1，Offset=0

​				  分片 460，ID=x，DF=0，MF=0，Offset=60

R2 到 B：与 R1 到 R2 相同

### 21

要求第一帧存活的 10 秒内发不完 $2^{16}$ 帧

$\frac{1024\times8}{v}\times2^{16}\geqslant10$

解得最大速度为 53.6Mbps

### 23

$2^{18}$

### 24

194.47.21.130

### 25

写成二进制有 20 个连续的 1，主机有 12 位，减 2，得 4094

### 27

A 198.16.0.0-198.16.15.255，198.16.0.0/20

B 198.16.16.0-198.16.23.255，198.16.16.0/21

C 198.16.32.0-198.16.47.255，198.16.16.0/21

D 198.16.64.0-198.16.95.255，198.16.64.0/19

### 28

可以。aggregated to 57.6.96.0/19

### 29

添加一个表项 29.18.60.0/22，不需要重新聚合

### 30

（a）与 22 位掩码相与135.46.60.0，存在表项将 a 转发到接口 1

（b）与 22 位掩码相与 135.46.56.0，存在表项将 b 转发到接口 0

（c）与 22 位掩码相与 135.46.52.0，不存在，转发到 2

（d）与 23 位掩码相与 192.53.40.0，存在，转发到 1

（e）与 23 位掩码相与 192.53.56.0，不存在，转发到 2

### 31

路由器故障时保存到地址映射丢失，发出的数据回应无法转发给主机

### 34

排队等到其他片段出现，直至超时

### 35

因为网络层不需要承担检验数据的责任，而且数据出错时可以重传而头部出错可能会发给错误的地址，应该把精力拿来处理更重要的事

### 38

IPv6 的扩展头部包含了选择协议的功能因而不在头部

### 39

  technical改变，ARP 表位数变化，IP 地址位数变化，而conceptual不改变

### 补充题2

（1）子网号占用 1 位；主机号不能全 0 或全 1

$2^6-2<120<2^7-2$，主机号至少占用 7 位

子网1：202.118.1.0/25

子网2：202.118.1.128/25

可以将子网 1 分配给局域网 1，或者将子网 2 分配给局域网 1

（2）

假设子网 1 分配给局域网 1，子网 2 分配给局域网 2

| 目的网络IP地址 | 子网掩码        | 下一跳 IP 地址 | 接口 |
| -------------- | --------------- | -------------- | ---- |
| 202.118.1.0    | 255.255.255.128 | direct         | E1   |
| 202.118.1.128  | 255.255.255.128 | Direct         | E2   |
| 202.118.3.2    | 255.255.255.255 | 202.118.2.2    | L0   |
| 0.0.0.0        | 0.0.0.0         | 202.118.2.2    | L0   |

地址聚合为202.118.1.0/24

路由为：

目的网络IP 地址 |子网掩码 |下一跳 IP 地址 |接口
202.118.1.0 |255.255.255.0 |202.118.2.1 |L0